/* Stores animations with the following rules:
   0 is a completely off pixel
   1 is a low-brightness pixel
   [anything else] is a full-brightness pixel
 */

#include <stdint.h>

typedef struct {
  uint8_t frame_width;
  uint8_t frame_height;
  uint32_t length; // number of frames
  uint8_t speed; // how long to show each frame (ms)

  const uint8_t* frames;
} animation_t;

static const uint8_t animation_pulse[8][4][4] = {
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {0, 0, 0, 0},
    {0, 1, 1, 0},
    {0, 1, 1, 0},
    {0, 0, 0, 0},
  },
  {
    {1, 1, 1, 1},
    {1, 2, 2, 1},
    {1, 2, 2, 1},
    {1, 1, 1, 1},
  },
  {
    {2, 2, 2, 2},
    {2, 2, 2, 2},
    {2, 2, 2, 2},
    {2, 2, 2, 2},
  },
  {
    {2, 2, 2, 2},
    {2, 2, 2, 2},
    {2, 2, 2, 2},
    {2, 2, 2, 2},
  },
  {
    {1, 1, 1, 1},
    {1, 2, 2, 1},
    {1, 2, 2, 1},
    {1, 1, 1, 1},
  },
  {
    {0, 0, 0, 0},
    {0, 1, 1, 0},
    {0, 1, 1, 0},
    {0, 0, 0, 0},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
};

static const uint8_t animation_orbit[8][4][4] = {
  {
    {2, 2, 0, 0},
    {2, 2, 0, 0},
    {1, 1, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {1, 2, 2, 0},
    {1, 2, 2, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {0, 1, 2, 2},
    {0, 1, 2, 2},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {0, 0, 1, 1},
    {0, 0, 2, 2},
    {0, 0, 2, 2},
    {0, 0, 0, 0},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 1, 1},
    {0, 0, 2, 2},
    {0, 0, 2, 2},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 2, 2, 1},
    {0, 2, 2, 1},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {2, 2, 1, 0},
    {2, 2, 1, 0},
  },
  {
    {0, 0, 0, 0},
    {2, 2, 0, 0},
    {2, 2, 0, 0},
    {1, 1, 0, 0},
  },  
};

static const uint8_t animation_slide[20][4][4] = {
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {1, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {2, 1, 0, 0},
    {1, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {1, 2, 1, 0},
    {2, 1, 0, 0},
    {1, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {0, 1, 2, 1},
    {1, 2, 1, 0},
    {2, 1, 0, 0},
    {1, 0, 0, 0},
  },
  {
    {0, 0, 1, 2},
    {0, 1, 2, 1},
    {1, 2, 1, 0},
    {2, 1, 0, 0},
  },
  {
    {0, 0, 0, 1},
    {0, 0, 1, 2},
    {0, 1, 2, 1},
    {1, 2, 1, 0},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 1},
    {0, 0, 1, 2},
    {0, 1, 2, 1},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 1},
    {0, 0, 1, 2},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 1},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 1},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 1},
    {0, 0, 1, 2},
  },
  {
    {0, 0, 0, 0},
    {0, 0, 0, 1},
    {0, 0, 1, 2},
    {0, 1, 2, 1},
  },
    {
    {0, 0, 0, 1},
    {0, 0, 1, 2},
    {0, 1, 2, 1},
    {1, 2, 1, 0},
  },
  {
    {0, 0, 1, 2},
    {0, 1, 2, 1},
    {1, 2, 1, 0},
    {2, 1, 0, 0},
  },
  {
    {0, 1, 2, 1},
    {1, 2, 1, 0},
    {2, 1, 0, 0},
    {1, 0, 0, 0},
  },
  {
    {1, 2, 1, 0},
    {2, 1, 0, 0},
    {1, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {2, 1, 0, 0},
    {1, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },
  {
    {1, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
    {0, 0, 0, 0},
  },  
};

static animation_t pulse = {
  .frame_height = 4, .frame_width = 4, // 4x4 res
  .length = 8, // 8 frames
  .speed = 50, // 50 ms per frame (20 fps)

  .frames = (const uint8_t *)animation_pulse,
};

static animation_t orbit = {
  .frame_height = 4, .frame_width = 4,
  .length = 8,
  .speed = 30, // (33.33 fps)

  .frames = (const uint8_t *)animation_orbit,
};

static animation_t slide = {
  .frame_height = 4, .frame_width = 4,
  .length = 20,
  .speed = 50, // (20 fps)

  .frames = (const uint8_t *)animation_slide,
};

// list of all animations
static const animation_t *animations[] = {&pulse, &orbit, &slide};
static const uint8_t animation_count = 3;
